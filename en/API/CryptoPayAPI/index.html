
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-8.5.10" name="generator"/>
<title>CryptoPay - pyCryptoPay-SDK Documentation</title>
<link href="../../../assets/stylesheets/main.975780f9.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.2505c338.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../assets/_mkdocstrings.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src="../../../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="" data-md-color-primary="" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#cryptopay">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="pyCryptoPay-SDK Documentation" class="md-header__button md-logo" data-md-component="logo" href="../../" title="pyCryptoPay-SDK Documentation">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            pyCryptoPay-SDK Documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              CryptoPay
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"></path></svg>
</label>
</form>
<div class="md-header__option">
<div class="md-select">
<button aria-label="Select language" class="md-header__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"></path></svg>
</button>
<div class="md-select__inner">
<ul class="md-select__list">
<li class="md-select__item">
<a class="md-select__link" href="../../../API/CryptoPayAPI/" hreflang="ru">
                    Русский
                  </a>
</li>
<li class="md-select__item">
<a class="md-select__link" href="./" hreflang="en">
                    English
                  </a>
</li>
</ul>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/LulzLoL231/pyCryptoPayAPI" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    LulzLoL231/pyCryptoPayAPI
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="pyCryptoPay-SDK Documentation" class="md-nav__button md-logo" data-md-component="logo" href="../../" title="pyCryptoPay-SDK Documentation">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    pyCryptoPay-SDK Documentation
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/LulzLoL231/pyCryptoPayAPI" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    LulzLoL231/pyCryptoPayAPI
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../">
        Home
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../install/">
        Install
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../get_token/">
        Get API token
      </a>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4">
          Examples
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Examples" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Examples
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../examples/get_me/">
        Get application
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../examples/testnet_usage/">
        Use testnet
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../examples/transfer_usage/">
        Transfer crypto
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../examples/webhook_example/">
        Webhook
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5">
          API
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="API" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          API
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          CryptoPay
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        CryptoPay
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api">
    src.CryptoPayAPI.api
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay">
    CryptoPay
  </a>
<nav aria-label="CryptoPay" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay.__init__">
    __init__()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay.create_invoice">
    create_invoice()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay.get_balance">
    get_balance()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay.get_currencies">
    get_currencies()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay.get_exchange_rates">
    get_exchange_rates()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay.get_invoices">
    get_invoices()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay.get_me">
    get_me()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay.process_webhook_update">
    process_webhook_update()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay.transfer">
    transfer()
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="schemas/">
        Schemas
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="errors/">
        Исключения
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6">
          Help
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Help" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          Help
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="https://github.com/LulzLoL231/pyCryptoPayAPI/issues">
        Issue tracker
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://help.crypt.bot/crypto-pay-api">
        CryptoPay API Docs
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api">
    src.CryptoPayAPI.api
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay">
    CryptoPay
  </a>
<nav aria-label="CryptoPay" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay.__init__">
    __init__()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay.create_invoice">
    create_invoice()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay.get_balance">
    get_balance()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay.get_currencies">
    get_currencies()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay.get_exchange_rates">
    get_exchange_rates()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay.get_invoices">
    get_invoices()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay.get_me">
    get_me()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay.process_webhook_update">
    process_webhook_update()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#src.CryptoPayAPI.api.CryptoPay.transfer">
    transfer()
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/LulzLoL231/pyCryptoPayAPI/edit/master/docs/API/CryptoPayAPI/index.en.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"></path></svg>
</a>
<h1 id="cryptopay">CryptoPay</h1>
<div class="doc doc-object doc-module">
<a id="src.CryptoPayAPI.api"></a>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="src.CryptoPayAPI.api.CryptoPay">
<code>CryptoPay</code>
</h2>
<div class="doc doc-contents">
<p>CryptoPay payment system.</p>
<details class="quote">
<summary>Source code in <code>src/CryptoPayAPI/api.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">CryptoPay</span><span class="p">:</span>
<span class="w">    </span><span class="sd">'''CryptoPay payment system.</span>
<span class="sd">    '''</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">testnet</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AsyncClient</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">'''</span>
<span class="sd">        Args:</span>
<span class="sd">            api_key (str): CryptoPay API token.</span>
<span class="sd">            testnet (bool): Use Testnet? Defaults to False.</span>
<span class="sd">            client (AsyncClient, optional): Using custom AsyncClient. Defaults is None.</span>
<span class="sd">        '''</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timeout_sec</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">'CryptoPay'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">api_key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">'Crypto-Pay-API-Token'</span><span class="p">:</span> <span class="n">api_key</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">testnet</span> <span class="o">=</span> <span class="n">testnet</span>
        <span class="k">if</span> <span class="n">testnet</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span> <span class="o">=</span> <span class="n">TESTHOST</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span> <span class="o">=</span> <span class="n">MAINHOST</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">client</span> <span class="ow">or</span> <span class="n">AsyncClient</span><span class="p">(</span>
            <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">base_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">Timeout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout_sec</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_callApi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">http_method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">api_method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">'''Makes a api call.</span>

<span class="sd">        Args:</span>
<span class="sd">            http_method (str): HTTP method. Available is "GET" and "POST".</span>
<span class="sd">            api_method (str): API method.</span>
<span class="sd">            query (dict, optional): Request query in dict. Defaults to {}.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: API response as JSON dict viceversa None.</span>
<span class="sd">        '''</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Called with args (</span><span class="si">{</span><span class="n">http_method</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">api_method</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s1">)'</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">query</span><span class="p">:</span>
            <span class="n">params</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urlencode</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">params</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">http_method</span><span class="p">,</span> <span class="n">api_method</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">is_success</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">'API answer: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s1">'ok'</span><span class="p">]:</span>
                <span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="s1">'result'</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UnexpectedError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">'[</span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s2">"error"</span><span class="p">][</span><span class="s2">"code"</span><span class="p">]</span><span class="si">}</span><span class="s1">] </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s2">"error"</span><span class="p">][</span><span class="s2">"name"</span><span class="p">]</span><span class="si">}</span><span class="s1">'</span><span class="p">,</span>
                    <span class="n">data</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UnauthorizedError</span><span class="p">(</span><span class="s1">'Token not found!'</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">resp</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">405</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">MethodNotFoundError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">'Method </span><span class="si">{</span><span class="n">api_method</span><span class="si">}</span><span class="s1"> not found!'</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">resp</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">400</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
                <span class="n">err</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">'error'</span><span class="p">][</span><span class="s1">'name'</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="s1">'EXPIRES_IN_INVALID'</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">ExpiresInInvalidError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s1">'Expires "</span><span class="si">{</span><span class="n">query</span><span class="p">[</span><span class="s2">"expires_in"</span><span class="p">]</span><span class="si">}</span><span class="s1">" is invalid!'</span><span class="p">,</span>
                        <span class="n">raw_response</span><span class="o">=</span><span class="n">data</span>
                    <span class="p">)</span>
            <span class="k">elif</span> <span class="n">resp</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
                <span class="n">err</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">'error'</span><span class="p">][</span><span class="s1">'name'</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="s1">'METHOD_DISABLED'</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">MethodDisabledError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s1">'Method "</span><span class="si">{</span><span class="n">api_method</span><span class="si">}</span><span class="s1">" is disabled!'</span><span class="p">,</span>
                        <span class="n">raw_response</span><span class="o">=</span><span class="n">data</span>
                    <span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">raise</span> <span class="n">UnexpectedError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">'[</span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s2">"error"</span><span class="p">][</span><span class="s2">"code"</span><span class="p">]</span><span class="si">}</span><span class="s1">] </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s2">"error"</span><span class="p">][</span><span class="s2">"name"</span><span class="p">]</span><span class="si">}</span><span class="s1">'</span><span class="p">,</span>
                <span class="n">raw_response</span><span class="o">=</span><span class="n">data</span>
            <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_me</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Application</span><span class="p">:</span>
<span class="w">        </span><span class="sd">'''Returns basic information about an app.</span>

<span class="sd">        Returns:</span>
<span class="sd">            schemas.Application: Basic information about an app.</span>
<span class="sd">        '''</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">'Called!'</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callApi</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span> <span class="s1">'getMe'</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Application</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_balance</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">Balance</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">'''Use this method to get a balance of your app.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[schemas.Balance]: Array of assets.</span>
<span class="sd">        '''</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">'Called!'</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callApi</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span> <span class="s1">'getBalance'</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">Balance</span><span class="p">(</span><span class="o">**</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_exchange_rates</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">ExchangeRate</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">'''Use this method to get exchange rates of supported currencies.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[schemas.ExchangeRate]: Array of currencies.</span>
<span class="sd">        '''</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">'Called!'</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callApi</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span> <span class="s1">'getExchangeRates'</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">ExchangeRate</span><span class="p">(</span><span class="o">**</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_currencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">Currency</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">'''Use this method to get a list of supported currencies.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[schemas.Currency]: Array of currencies.</span>
<span class="sd">        '''</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">'Called!'</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callApi</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span> <span class="s1">'getCurrencies'</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">Currency</span><span class="p">(</span><span class="o">**</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_invoice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">asset</span><span class="p">:</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Assets</span><span class="p">,</span>
                             <span class="n">amount</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                             <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                             <span class="n">hidden_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                             <span class="n">paid_btn_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">PaidButtonNames</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                             <span class="n">paid_btn_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                             <span class="n">payload</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                             <span class="n">allow_comments</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                             <span class="n">allow_anonymous</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                             <span class="n">expires_in</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Invoice</span><span class="p">:</span>
<span class="w">        </span><span class="sd">'''Create a new invoice.</span>

<span class="sd">        Args:</span>
<span class="sd">            asset (schemas.Assets): Currency.</span>
<span class="sd">            amount (float): Amount of invoice in float.</span>
<span class="sd">            description (Optional[str]): Description for the invoice. User will see this description when they pay the invoice. Up to 1024 characters. Defaults to None.</span>
<span class="sd">            hidden_message (Optional[str]): Text of the message that will be shown to a user after the invoice is paid. Up to 2048 characters. Defaults to None.</span>
<span class="sd">            paid_btn_name (Optional[schemas.PaidButtonNames]): Name of the button that will be shown to a user after the invoice is paid. Defaults to None.</span>
<span class="sd">            paid_btn_url (Optional[str]): Required if paid_btn_name is used. URL to be opened when the button is pressed. You can set any success link (for example, a link to your bot). Starts with https or http. Defaults to None.</span>
<span class="sd">            payload (Optional[str]): Any data you want to attach to the invoice (for example, user ID, payment ID, ect). Up to 4kb. Defaults to None.</span>
<span class="sd">            allow_comments (bool): Allow a user to add a comment to the payment. Defaults to True.</span>
<span class="sd">            allow_anonymous (bool): Allow a user to pay the invoice anonymously. Defaults to True.</span>
<span class="sd">            expires_in (Optional[int]): You can set a payment time limit for the invoice in seconds. Values between 1-2678400 are accepted. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            schemas.Invoice: Object of the created invoice.</span>
<span class="sd">        '''</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Called with args (</span><span class="si">{</span><span class="n">asset</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">amount</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">hidden_message</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">paid_btn_name</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">paid_btn_url</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">payload</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">allow_comments</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">allow_anonymous</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">expires_in</span><span class="si">}</span><span class="s1">)'</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">'asset'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">asset</span><span class="p">),</span>
            <span class="s1">'amount'</span><span class="p">:</span> <span class="n">amount</span><span class="p">,</span>
            <span class="s1">'allow_comments'</span><span class="p">:</span> <span class="n">allow_comments</span><span class="p">,</span>
            <span class="s1">'allow_anonymous'</span><span class="p">:</span> <span class="n">allow_anonymous</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">description</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">'description'</span><span class="p">]</span> <span class="o">=</span> <span class="n">description</span>
        <span class="k">elif</span> <span class="n">hidden_message</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">'hidden_message'</span><span class="p">]</span> <span class="o">=</span> <span class="n">hidden_message</span>
        <span class="k">elif</span> <span class="n">paid_btn_name</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">'paid_btn_name'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">paid_btn_name</span><span class="p">)</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">'paid_btn_url'</span><span class="p">]</span> <span class="o">=</span> <span class="n">paid_btn_url</span>
        <span class="k">elif</span> <span class="n">payload</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">'payload'</span><span class="p">]</span> <span class="o">=</span> <span class="n">payload</span>
        <span class="k">elif</span> <span class="n">expires_in</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">'expires_in'</span><span class="p">]</span> <span class="o">=</span> <span class="n">expires_in</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callApi</span><span class="p">(</span><span class="s1">'POST'</span><span class="p">,</span> <span class="s1">'createInvoice'</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Invoice</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_invoices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">asset</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">Assets</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                           <span class="n">invoice_ids</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                           <span class="n">status</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">InvoiceStatus</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                           <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                           <span class="n">count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">Invoice</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">'''Use this method to get invoices of your app.</span>

<span class="sd">        Args:</span>
<span class="sd">            asset (Optional[schemas.Assets]): Currency codes separated by comma. Defaults to all assets.</span>
<span class="sd">            invoice_ids (Optional[str]): Invoice IDs separated by comma. Defaults to None.</span>
<span class="sd">            status (Optional[schemas.InvoiceStatus]): Status of invoices to be returned. Defaults to all statuses.</span>
<span class="sd">            offset (int): Offset needed to return a specific subset of invoices. Defaults to 0.</span>
<span class="sd">            count (int): Number of invoices to be returned. Values between 1-1000 are accepted. Defaults to 100.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[schemas.Invoice]: Array of invoices.</span>
<span class="sd">        '''</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Called with args (</span><span class="si">{</span><span class="n">asset</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">invoice_ids</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">offset</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s1">)'</span><span class="p">)</span>
        <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">'offset'</span><span class="p">:</span> <span class="n">offset</span><span class="p">,</span>
            <span class="s1">'count'</span><span class="p">:</span> <span class="n">count</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">asset</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">'asset'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">asset</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">invoice_ids</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">'invoice_ids'</span><span class="p">]</span> <span class="o">=</span> <span class="n">invoice_ids</span>
        <span class="k">elif</span> <span class="n">status</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">'status'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callApi</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span> <span class="s1">'getInvoices'</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">Invoice</span><span class="p">(</span><span class="o">**</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">result</span><span class="p">[</span><span class="s1">'items'</span><span class="p">]]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">transfer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                       <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                       <span class="n">asset</span><span class="p">:</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Assets</span><span class="p">,</span>
                       <span class="n">amount</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                       <span class="n">spend_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                       <span class="n">comment</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                       <span class="n">disable_send_notification</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Transfer</span><span class="p">:</span>
<span class="w">        </span><span class="sd">'''Use this method to send coins from your app's balance to a user.</span>

<span class="sd">        Args:</span>
<span class="sd">            user_id (int): Telegram user_id.</span>
<span class="sd">            asset (schemas.Assets): Currency.</span>
<span class="sd">            amount (float): Amount of the transfer in float. The minimum and maximum amounts for each of the support asset roughly correspond to the limit of 0.01-25000 USD. Use `get_exchange_rates` to convert amounts.</span>
<span class="sd">            spend_id (str): Unique ID to make your request idempotent and ensure that only one of the transfers with the same `spend_id` will be accepted by Crypto Pay API. This parameter is useful when the transfer should be retried (i.e. request timeout, connection reset, 500 HTTP status, etc). It can be some unique withdrawal identifier for example. Up to 64 symbols.</span>
<span class="sd">            comment (Optional[str], optional): Comment for the transfer. Users will see this comment when they receive a notification about the transfer. Up to 1024 symbols. Defaults to None.</span>
<span class="sd">            disable_send_notification (Optional[bool], optional): Pass `True` if the user should not receive a notification about the transfer. Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            schemas.Transfer: Object of completed `transfer`.</span>
<span class="sd">        '''</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Called with args (</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">asset</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">amount</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">spend_id</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">disable_send_notification</span><span class="si">}</span><span class="s1">)'</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">'user_id'</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span>
            <span class="s1">'asset'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">asset</span><span class="p">),</span>
            <span class="s1">'amount'</span><span class="p">:</span> <span class="n">amount</span><span class="p">,</span>
            <span class="s1">'spend_id'</span><span class="p">:</span> <span class="n">spend_id</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">'comment'</span><span class="p">]</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="k">elif</span> <span class="n">disable_send_notification</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">'disable_send_notification'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'true'</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callApi</span><span class="p">(</span><span class="s1">'POST'</span><span class="p">,</span> <span class="s1">'transfer'</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Transfer</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">process_webhook_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                     <span class="n">body</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
                                     <span class="n">headers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Update</span><span class="p">:</span>
<span class="w">        </span><span class="sd">'''Process webhook update.</span>

<span class="sd">        Args:</span>
<span class="sd">            body (bytes): Update request body.</span>
<span class="sd">            headers (dict): Update request headers.</span>

<span class="sd">        Returns:</span>
<span class="sd">            schemas.Update: Webhook update.</span>
<span class="sd">        '''</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Called with args: (</span><span class="si">{</span><span class="n">body</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">headers</span><span class="si">}</span><span class="s1">)'</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="n">update</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Update</span><span class="p">(</span><span class="o">**</span><span class="n">loads</span><span class="p">(</span><span class="n">body</span><span class="p">),</span> <span class="n">raw_body</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="n">sign</span> <span class="o">=</span> <span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'crypto-pay-api-signature'</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">sign</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UpdateSignatureError</span><span class="p">(</span>
                <span class="s1">'Not found signature!'</span><span class="p">,</span>
                <span class="n">raw_response</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">dict</span><span class="p">(),</span>
                <span class="n">raw_headers</span><span class="o">=</span><span class="n">headers</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">update</span><span class="o">.</span><span class="n">check_signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="p">,</span> <span class="n">sign</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">UpdateSignatureError</span><span class="p">(</span>
                <span class="s1">'Signature validation error!'</span><span class="p">,</span>
                <span class="n">raw_response</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">dict</span><span class="p">(),</span>
                <span class="n">raw_headers</span><span class="o">=</span><span class="n">headers</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">update</span>
</code></pre></div></td></tr></table></div>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="src.CryptoPayAPI.api.CryptoPay.__init__">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">testnet</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
</h3>
<div class="doc doc-contents">
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>api_key</code></td>
<td>
<code>str</code>
</td>
<td><p>CryptoPay API token.</p></td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>testnet</code></td>
<td>
<code>bool</code>
</td>
<td><p>Use Testnet? Defaults to False.</p></td>
<td>
<code>False</code>
</td>
</tr>
<tr>
<td><code>client</code></td>
<td>
<code><span title="httpx.AsyncClient">AsyncClient</span></code>
</td>
<td><p>Using custom AsyncClient. Defaults is None.</p></td>
<td>
<code>None</code>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/CryptoPayAPI/api.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">testnet</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AsyncClient</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">'''</span>
<span class="sd">    Args:</span>
<span class="sd">        api_key (str): CryptoPay API token.</span>
<span class="sd">        testnet (bool): Use Testnet? Defaults to False.</span>
<span class="sd">        client (AsyncClient, optional): Using custom AsyncClient. Defaults is None.</span>
<span class="sd">    '''</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">timeout_sec</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">'CryptoPay'</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">api_key</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">'Crypto-Pay-API-Token'</span><span class="p">:</span> <span class="n">api_key</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">testnet</span> <span class="o">=</span> <span class="n">testnet</span>
    <span class="k">if</span> <span class="n">testnet</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span> <span class="o">=</span> <span class="n">TESTHOST</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span> <span class="o">=</span> <span class="n">MAINHOST</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">client</span> <span class="ow">or</span> <span class="n">AsyncClient</span><span class="p">(</span>
        <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">base_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="n">Timeout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout_sec</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="src.CryptoPayAPI.api.CryptoPay.create_invoice">
<code class="highlight language-python"><span class="n">create_invoice</span><span class="p">(</span><span class="n">asset</span><span class="p">,</span> <span class="n">amount</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hidden_message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">paid_btn_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">paid_btn_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">allow_comments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">allow_anonymous</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">expires_in</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
</h3>
<div class="doc doc-contents">
<p>Create a new invoice.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>asset</code></td>
<td>
<code><a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas">schemas</a>.<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas.Assets" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas.Assets">Assets</a></code>
</td>
<td><p>Currency.</p></td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>amount</code></td>
<td>
<code>float</code>
</td>
<td><p>Amount of invoice in float.</p></td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>description</code></td>
<td>
<code><span title="typing.Optional">Optional</span>[str]</code>
</td>
<td><p>Description for the invoice. User will see this description when they pay the invoice. Up to 1024 characters. Defaults to None.</p></td>
<td>
<code>None</code>
</td>
</tr>
<tr>
<td><code>hidden_message</code></td>
<td>
<code><span title="typing.Optional">Optional</span>[str]</code>
</td>
<td><p>Text of the message that will be shown to a user after the invoice is paid. Up to 2048 characters. Defaults to None.</p></td>
<td>
<code>None</code>
</td>
</tr>
<tr>
<td><code>paid_btn_name</code></td>
<td>
<code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas">schemas</a>.<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas.PaidButtonNames" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas.PaidButtonNames">PaidButtonNames</a>]</code>
</td>
<td><p>Name of the button that will be shown to a user after the invoice is paid. Defaults to None.</p></td>
<td>
<code>None</code>
</td>
</tr>
<tr>
<td><code>paid_btn_url</code></td>
<td>
<code><span title="typing.Optional">Optional</span>[str]</code>
</td>
<td><p>Required if paid_btn_name is used. URL to be opened when the button is pressed. You can set any success link (for example, a link to your bot). Starts with https or http. Defaults to None.</p></td>
<td>
<code>None</code>
</td>
</tr>
<tr>
<td><code>payload</code></td>
<td>
<code><span title="typing.Optional">Optional</span>[str]</code>
</td>
<td><p>Any data you want to attach to the invoice (for example, user ID, payment ID, ect). Up to 4kb. Defaults to None.</p></td>
<td>
<code>None</code>
</td>
</tr>
<tr>
<td><code>allow_comments</code></td>
<td>
<code>bool</code>
</td>
<td><p>Allow a user to add a comment to the payment. Defaults to True.</p></td>
<td>
<code>True</code>
</td>
</tr>
<tr>
<td><code>allow_anonymous</code></td>
<td>
<code>bool</code>
</td>
<td><p>Allow a user to pay the invoice anonymously. Defaults to True.</p></td>
<td>
<code>True</code>
</td>
</tr>
<tr>
<td><code>expires_in</code></td>
<td>
<code><span title="typing.Optional">Optional</span>[int]</code>
</td>
<td><p>You can set a payment time limit for the invoice in seconds. Values between 1-2678400 are accepted. Defaults to None.</p></td>
<td>
<code>None</code>
</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code><a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas">schemas</a>.<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas.Invoice" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas.Invoice">Invoice</a></code>
</td>
<td><p>schemas.Invoice: Object of the created invoice.</p></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/CryptoPayAPI/api.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">create_invoice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">asset</span><span class="p">:</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Assets</span><span class="p">,</span>
                         <span class="n">amount</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                         <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                         <span class="n">hidden_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                         <span class="n">paid_btn_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">PaidButtonNames</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                         <span class="n">paid_btn_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                         <span class="n">payload</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                         <span class="n">allow_comments</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                         <span class="n">allow_anonymous</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                         <span class="n">expires_in</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Invoice</span><span class="p">:</span>
<span class="w">    </span><span class="sd">'''Create a new invoice.</span>

<span class="sd">    Args:</span>
<span class="sd">        asset (schemas.Assets): Currency.</span>
<span class="sd">        amount (float): Amount of invoice in float.</span>
<span class="sd">        description (Optional[str]): Description for the invoice. User will see this description when they pay the invoice. Up to 1024 characters. Defaults to None.</span>
<span class="sd">        hidden_message (Optional[str]): Text of the message that will be shown to a user after the invoice is paid. Up to 2048 characters. Defaults to None.</span>
<span class="sd">        paid_btn_name (Optional[schemas.PaidButtonNames]): Name of the button that will be shown to a user after the invoice is paid. Defaults to None.</span>
<span class="sd">        paid_btn_url (Optional[str]): Required if paid_btn_name is used. URL to be opened when the button is pressed. You can set any success link (for example, a link to your bot). Starts with https or http. Defaults to None.</span>
<span class="sd">        payload (Optional[str]): Any data you want to attach to the invoice (for example, user ID, payment ID, ect). Up to 4kb. Defaults to None.</span>
<span class="sd">        allow_comments (bool): Allow a user to add a comment to the payment. Defaults to True.</span>
<span class="sd">        allow_anonymous (bool): Allow a user to pay the invoice anonymously. Defaults to True.</span>
<span class="sd">        expires_in (Optional[int]): You can set a payment time limit for the invoice in seconds. Values between 1-2678400 are accepted. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        schemas.Invoice: Object of the created invoice.</span>
<span class="sd">    '''</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Called with args (</span><span class="si">{</span><span class="n">asset</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">amount</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">hidden_message</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">paid_btn_name</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">paid_btn_url</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">payload</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">allow_comments</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">allow_anonymous</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">expires_in</span><span class="si">}</span><span class="s1">)'</span><span class="p">)</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">'asset'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">asset</span><span class="p">),</span>
        <span class="s1">'amount'</span><span class="p">:</span> <span class="n">amount</span><span class="p">,</span>
        <span class="s1">'allow_comments'</span><span class="p">:</span> <span class="n">allow_comments</span><span class="p">,</span>
        <span class="s1">'allow_anonymous'</span><span class="p">:</span> <span class="n">allow_anonymous</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">description</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'description'</span><span class="p">]</span> <span class="o">=</span> <span class="n">description</span>
    <span class="k">elif</span> <span class="n">hidden_message</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'hidden_message'</span><span class="p">]</span> <span class="o">=</span> <span class="n">hidden_message</span>
    <span class="k">elif</span> <span class="n">paid_btn_name</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'paid_btn_name'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">paid_btn_name</span><span class="p">)</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'paid_btn_url'</span><span class="p">]</span> <span class="o">=</span> <span class="n">paid_btn_url</span>
    <span class="k">elif</span> <span class="n">payload</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'payload'</span><span class="p">]</span> <span class="o">=</span> <span class="n">payload</span>
    <span class="k">elif</span> <span class="n">expires_in</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'expires_in'</span><span class="p">]</span> <span class="o">=</span> <span class="n">expires_in</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callApi</span><span class="p">(</span><span class="s1">'POST'</span><span class="p">,</span> <span class="s1">'createInvoice'</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Invoice</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="src.CryptoPayAPI.api.CryptoPay.get_balance">
<code class="highlight language-python"><span class="n">get_balance</span><span class="p">()</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
</h3>
<div class="doc doc-contents">
<p>Use this method to get a balance of your app.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas">schemas</a>.<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas.Balance" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas.Balance">Balance</a>]</code>
</td>
<td><p>List[schemas.Balance]: Array of assets.</p></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/CryptoPayAPI/api.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_balance</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">Balance</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">'''Use this method to get a balance of your app.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[schemas.Balance]: Array of assets.</span>
<span class="sd">    '''</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">'Called!'</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callApi</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span> <span class="s1">'getBalance'</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">Balance</span><span class="p">(</span><span class="o">**</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="src.CryptoPayAPI.api.CryptoPay.get_currencies">
<code class="highlight language-python"><span class="n">get_currencies</span><span class="p">()</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
</h3>
<div class="doc doc-contents">
<p>Use this method to get a list of supported currencies.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas">schemas</a>.<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas.Currency" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas.Currency">Currency</a>]</code>
</td>
<td><p>List[schemas.Currency]: Array of currencies.</p></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/CryptoPayAPI/api.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_currencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">Currency</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">'''Use this method to get a list of supported currencies.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[schemas.Currency]: Array of currencies.</span>
<span class="sd">    '''</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">'Called!'</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callApi</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span> <span class="s1">'getCurrencies'</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">Currency</span><span class="p">(</span><span class="o">**</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="src.CryptoPayAPI.api.CryptoPay.get_exchange_rates">
<code class="highlight language-python"><span class="n">get_exchange_rates</span><span class="p">()</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
</h3>
<div class="doc doc-contents">
<p>Use this method to get exchange rates of supported currencies.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas">schemas</a>.<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas.ExchangeRate" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas.ExchangeRate">ExchangeRate</a>]</code>
</td>
<td><p>List[schemas.ExchangeRate]: Array of currencies.</p></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/CryptoPayAPI/api.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_exchange_rates</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">ExchangeRate</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">'''Use this method to get exchange rates of supported currencies.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[schemas.ExchangeRate]: Array of currencies.</span>
<span class="sd">    '''</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">'Called!'</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callApi</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span> <span class="s1">'getExchangeRates'</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">ExchangeRate</span><span class="p">(</span><span class="o">**</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="src.CryptoPayAPI.api.CryptoPay.get_invoices">
<code class="highlight language-python"><span class="n">get_invoices</span><span class="p">(</span><span class="n">asset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">invoice_ids</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
</h3>
<div class="doc doc-contents">
<p>Use this method to get invoices of your app.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>asset</code></td>
<td>
<code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas">schemas</a>.<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas.Assets" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas.Assets">Assets</a>]</code>
</td>
<td><p>Currency codes separated by comma. Defaults to all assets.</p></td>
<td>
<code>None</code>
</td>
</tr>
<tr>
<td><code>invoice_ids</code></td>
<td>
<code><span title="typing.Optional">Optional</span>[str]</code>
</td>
<td><p>Invoice IDs separated by comma. Defaults to None.</p></td>
<td>
<code>None</code>
</td>
</tr>
<tr>
<td><code>status</code></td>
<td>
<code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas">schemas</a>.<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas.InvoiceStatus" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas.InvoiceStatus">InvoiceStatus</a>]</code>
</td>
<td><p>Status of invoices to be returned. Defaults to all statuses.</p></td>
<td>
<code>None</code>
</td>
</tr>
<tr>
<td><code>offset</code></td>
<td>
<code>int</code>
</td>
<td><p>Offset needed to return a specific subset of invoices. Defaults to 0.</p></td>
<td>
<code>0</code>
</td>
</tr>
<tr>
<td><code>count</code></td>
<td>
<code>int</code>
</td>
<td><p>Number of invoices to be returned. Values between 1-1000 are accepted. Defaults to 100.</p></td>
<td>
<code>100</code>
</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas">schemas</a>.<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas.Invoice" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas.Invoice">Invoice</a>]</code>
</td>
<td><p>List[schemas.Invoice]: Array of invoices.</p></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/CryptoPayAPI/api.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_invoices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                       <span class="n">asset</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">Assets</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                       <span class="n">invoice_ids</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                       <span class="n">status</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">InvoiceStatus</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                       <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                       <span class="n">count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">Invoice</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">'''Use this method to get invoices of your app.</span>

<span class="sd">    Args:</span>
<span class="sd">        asset (Optional[schemas.Assets]): Currency codes separated by comma. Defaults to all assets.</span>
<span class="sd">        invoice_ids (Optional[str]): Invoice IDs separated by comma. Defaults to None.</span>
<span class="sd">        status (Optional[schemas.InvoiceStatus]): Status of invoices to be returned. Defaults to all statuses.</span>
<span class="sd">        offset (int): Offset needed to return a specific subset of invoices. Defaults to 0.</span>
<span class="sd">        count (int): Number of invoices to be returned. Values between 1-1000 are accepted. Defaults to 100.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[schemas.Invoice]: Array of invoices.</span>
<span class="sd">    '''</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Called with args (</span><span class="si">{</span><span class="n">asset</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">invoice_ids</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">offset</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s1">)'</span><span class="p">)</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">'offset'</span><span class="p">:</span> <span class="n">offset</span><span class="p">,</span>
        <span class="s1">'count'</span><span class="p">:</span> <span class="n">count</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">asset</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'asset'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">asset</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">invoice_ids</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'invoice_ids'</span><span class="p">]</span> <span class="o">=</span> <span class="n">invoice_ids</span>
    <span class="k">elif</span> <span class="n">status</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'status'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callApi</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span> <span class="s1">'getInvoices'</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">schemas</span><span class="o">.</span><span class="n">Invoice</span><span class="p">(</span><span class="o">**</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">result</span><span class="p">[</span><span class="s1">'items'</span><span class="p">]]</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="src.CryptoPayAPI.api.CryptoPay.get_me">
<code class="highlight language-python"><span class="n">get_me</span><span class="p">()</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
</h3>
<div class="doc doc-contents">
<p>Returns basic information about an app.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code><a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas">schemas</a>.<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas.Application" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas.Application">Application</a></code>
</td>
<td><p>schemas.Application: Basic information about an app.</p></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/CryptoPayAPI/api.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_me</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Application</span><span class="p">:</span>
<span class="w">    </span><span class="sd">'''Returns basic information about an app.</span>

<span class="sd">    Returns:</span>
<span class="sd">        schemas.Application: Basic information about an app.</span>
<span class="sd">    '''</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">'Called!'</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callApi</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span> <span class="s1">'getMe'</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Application</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="src.CryptoPayAPI.api.CryptoPay.process_webhook_update">
<code class="highlight language-python"><span class="n">process_webhook_update</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
</h3>
<div class="doc doc-contents">
<p>Process webhook update.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>body</code></td>
<td>
<code>bytes</code>
</td>
<td><p>Update request body.</p></td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>headers</code></td>
<td>
<code>dict</code>
</td>
<td><p>Update request headers.</p></td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code><a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas">schemas</a>.<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas.Update" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas.Update">Update</a></code>
</td>
<td><p>schemas.Update: Webhook update.</p></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/CryptoPayAPI/api.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">process_webhook_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                 <span class="n">body</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
                                 <span class="n">headers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Update</span><span class="p">:</span>
<span class="w">    </span><span class="sd">'''Process webhook update.</span>

<span class="sd">    Args:</span>
<span class="sd">        body (bytes): Update request body.</span>
<span class="sd">        headers (dict): Update request headers.</span>

<span class="sd">    Returns:</span>
<span class="sd">        schemas.Update: Webhook update.</span>
<span class="sd">    '''</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Called with args: (</span><span class="si">{</span><span class="n">body</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">headers</span><span class="si">}</span><span class="s1">)'</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
    <span class="n">update</span> <span class="o">=</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Update</span><span class="p">(</span><span class="o">**</span><span class="n">loads</span><span class="p">(</span><span class="n">body</span><span class="p">),</span> <span class="n">raw_body</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'crypto-pay-api-signature'</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">sign</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">UpdateSignatureError</span><span class="p">(</span>
            <span class="s1">'Not found signature!'</span><span class="p">,</span>
            <span class="n">raw_response</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">dict</span><span class="p">(),</span>
            <span class="n">raw_headers</span><span class="o">=</span><span class="n">headers</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">update</span><span class="o">.</span><span class="n">check_signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="p">,</span> <span class="n">sign</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">UpdateSignatureError</span><span class="p">(</span>
            <span class="s1">'Signature validation error!'</span><span class="p">,</span>
            <span class="n">raw_response</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">dict</span><span class="p">(),</span>
            <span class="n">raw_headers</span><span class="o">=</span><span class="n">headers</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">update</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="src.CryptoPayAPI.api.CryptoPay.transfer">
<code class="highlight language-python"><span class="n">transfer</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">asset</span><span class="p">,</span> <span class="n">amount</span><span class="p">,</span> <span class="n">spend_id</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">disable_send_notification</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
</h3>
<div class="doc doc-contents">
<p>Use this method to send coins from your app's balance to a user.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>user_id</code></td>
<td>
<code>int</code>
</td>
<td><p>Telegram user_id.</p></td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>asset</code></td>
<td>
<code><a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas">schemas</a>.<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas.Assets" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas.Assets">Assets</a></code>
</td>
<td><p>Currency.</p></td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>amount</code></td>
<td>
<code>float</code>
</td>
<td><p>Amount of the transfer in float. The minimum and maximum amounts for each of the support asset roughly correspond to the limit of 0.01-25000 USD. Use <code>get_exchange_rates</code> to convert amounts.</p></td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>spend_id</code></td>
<td>
<code>str</code>
</td>
<td><p>Unique ID to make your request idempotent and ensure that only one of the transfers with the same <code>spend_id</code> will be accepted by Crypto Pay API. This parameter is useful when the transfer should be retried (i.e. request timeout, connection reset, 500 HTTP status, etc). It can be some unique withdrawal identifier for example. Up to 64 symbols.</p></td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>comment</code></td>
<td>
<code><span title="typing.Optional">Optional</span>[str]</code>
</td>
<td><p>Comment for the transfer. Users will see this comment when they receive a notification about the transfer. Up to 1024 symbols. Defaults to None.</p></td>
<td>
<code>None</code>
</td>
</tr>
<tr>
<td><code>disable_send_notification</code></td>
<td>
<code><span title="typing.Optional">Optional</span>[bool]</code>
</td>
<td><p>Pass <code>True</code> if the user should not receive a notification about the transfer. Defaults to False.</p></td>
<td>
<code>False</code>
</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code><a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas">schemas</a>.<a class="autorefs autorefs-internal" title="src.CryptoPayAPI.schemas.Transfer" href="../../../API/CryptoPayAPI/schemas/#src.CryptoPayAPI.schemas.Transfer">Transfer</a></code>
</td>
<td><p>schemas.Transfer: Object of completed <code>transfer</code>.</p></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/CryptoPayAPI/api.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">transfer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                   <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                   <span class="n">asset</span><span class="p">:</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Assets</span><span class="p">,</span>
                   <span class="n">amount</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                   <span class="n">spend_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                   <span class="n">comment</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="n">disable_send_notification</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Transfer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">'''Use this method to send coins from your app's balance to a user.</span>

<span class="sd">    Args:</span>
<span class="sd">        user_id (int): Telegram user_id.</span>
<span class="sd">        asset (schemas.Assets): Currency.</span>
<span class="sd">        amount (float): Amount of the transfer in float. The minimum and maximum amounts for each of the support asset roughly correspond to the limit of 0.01-25000 USD. Use `get_exchange_rates` to convert amounts.</span>
<span class="sd">        spend_id (str): Unique ID to make your request idempotent and ensure that only one of the transfers with the same `spend_id` will be accepted by Crypto Pay API. This parameter is useful when the transfer should be retried (i.e. request timeout, connection reset, 500 HTTP status, etc). It can be some unique withdrawal identifier for example. Up to 64 symbols.</span>
<span class="sd">        comment (Optional[str], optional): Comment for the transfer. Users will see this comment when they receive a notification about the transfer. Up to 1024 symbols. Defaults to None.</span>
<span class="sd">        disable_send_notification (Optional[bool], optional): Pass `True` if the user should not receive a notification about the transfer. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        schemas.Transfer: Object of completed `transfer`.</span>
<span class="sd">    '''</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Called with args (</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">asset</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">amount</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">spend_id</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">disable_send_notification</span><span class="si">}</span><span class="s1">)'</span><span class="p">)</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">'user_id'</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span>
        <span class="s1">'asset'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">asset</span><span class="p">),</span>
        <span class="s1">'amount'</span><span class="p">:</span> <span class="n">amount</span><span class="p">,</span>
        <span class="s1">'spend_id'</span><span class="p">:</span> <span class="n">spend_id</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'comment'</span><span class="p">]</span> <span class="o">=</span> <span class="n">comment</span>
    <span class="k">elif</span> <span class="n">disable_send_notification</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'disable_send_notification'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'true'</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callApi</span><span class="p">(</span><span class="s1">'POST'</span><span class="p">,</span> <span class="s1">'transfer'</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">schemas</span><span class="o">.</span><span class="n">Transfer</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<hr/>
<div class="md-source-file">
<small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">January 11, 2023</span>
<br/>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">January 11, 2023</span>
</small>
</div>
</article>
</div>
</div>
<a class="md-top md-icon" data-md-component="top" hidden="" href="#">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
            Back to top
          </a>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Webhook" class="md-footer__link md-footer__link--prev" href="../../examples/webhook_example/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Webhook
            </div>
</div>
</a>
<a aria-label="Next: Schemas" class="md-footer__link md-footer__link--next" href="schemas/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              Schemas
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © 2023 Maxim Mosin
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tracking", "navigation.sections", "navigation.top", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
<script src="../../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>